(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(59)},33:function(e,t,a){},34:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},35:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),n=a(25),r=a.n(n),l=(a(33),a(2)),h=a(3),o=a(7),c=a(6),m=a(8),u=(a(34),a(35),a(63)),g=a(62),d=a(60),f=a(13),v=a(4),p=function(){function e(t,a,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"../../../images/grey.png";Object(l.a)(this,e),this.ctx=t,this.img=new Image,this.img.src=i,this.x=0,this.y=0,this.w=a,this.h=s,this.dx=10}return Object(h.a)(e,[{key:"draw",value:function(){this.ctx.drawImage(this.img,this.x,this.y,this.w,this.h)}}]),e}();function b(e){this.game=e,this.x=100,this.y=100,this.lx=this.x,this.ly=this.y,this.img=new Image,this.img.src="../../../images/marioRun.png",this.img.frames=8,this.img.framesTo=0,this.img.framesFrom=0,this.img.frameIndex=0,this.img.framesX=0,this.img.framesY=0,this.img.framesW=0,this.img.framesH=0,this.w=40,this.h=35,this.vxInitial=5,this.vx=5,this.vy=5,this.keys=[],this.jumping=!1,this.doubleJumping=!1,this.jumpDown=!1,this.dashDown=!1,this.breakDownDown=!1,this.collectableItems=[],this.gravityVelocity=1.5,this.jumpVelocity=20,this.doubleJumpVelocity=15,this.abailableDash=!1,this.dashVelocity=20,this.dashCheck=0,this.dahsFrames=10,this.dashing=!1,this.abailableDoubleJump=!1,this.abailableBreakDown=!1,this.breakDownVelocity=40,this.breakingDown=!1,this.setListeners()}b.prototype.draw=function(){this.game.ctx.drawImage(this.img,this.img.frameIndex*Math.floor(this.img.width/this.img.frames)+this.img.framesX,this.img.framesY,Math.floor(this.img.width/this.img.frames)+this.img.framesW,this.img.height+this.img.framesH,this.x,this.y,this.w,this.h)},b.prototype.moveRight=function(){if(this.lx=this.x,this.x+=this.vx,this.platformColision())for(var e=this.vx;this.platformColision();e--)this.x-=1},b.prototype.moveLeft=function(){if(this.lx=this.x,this.x-=this.vx,this.platformColision())for(var e=this.vx;this.platformColision();e--)this.x+=1},b.prototype.jump=function(){this.jumping?!this.doubleJumping&&this.abailableDoubleJump&&(this.doubleJumping=!0,this.vy-=this.vy+this.doubleJumpVelocity):(this.jumping=!0,this.vy-=this.jumpVelocity)},b.prototype.dash=function(){this.abailableDash&&this.keys[this.game.keys.LEFT_KEY]?(this.dashCheck=this.game.framesCounter+this.dahsFrames,this.vx=this.dashVelocity,this.dashing=!0):this.abailableDash&&this.keys[this.game.keys.RIGHT_KEY]&&(this.dashCheck=this.game.framesCounter+this.dahsFrames,this.vx=this.dashVelocity,this.dashing=!0)},b.prototype.breakDown=function(){this.abailableBreakDown&&this.jumping&&(this.vy+=this.breakDownVelocity)},b.prototype.move=function(){this.game.framesCounter>this.dashCheck%1e3&&(this.vx=this.vxInitial,this.dashing=!1),this.keys[this.game.keys.LEFT_KEY]?(this.moveLeft(),this.vx>=this.dashVelocity?this.setAnimationParams(9,9):this.setAnimationParams(0,3)):this.keys[this.game.keys.RIGHT_KEY]?(this.moveRight(),this.vx>=this.dashVelocity?this.setAnimationParams(10,10):this.setAnimationParams(4,7)):this.vy>=this.breakDownVelocity?this.setAnimationParams(11,11):this.setAnimationParams(4,4),this.animateRun()},b.prototype.setListeners=function(){document.onkeydown=function(e){e.keyCode==this.game.keys.SPACE?this.jumpDown||(this.jump(),this.jumpDown=!0):e.keyCode==this.game.keys.D_KEY?this.dashDown||(this.dash(),this.dashDown=!0):e.keyCode==this.game.keys.F_KEY?this.breakDownDown||(this.breakDown(),this.breakDownDown=!0):this.keys[e.keyCode]=!0}.bind(this),document.onkeyup=function(e){e.keyCode==this.game.keys.SPACE?this.jumpDown=!1:e.keyCode==this.game.keys.D_KEY?this.dashDown=!1:e.keyCode==this.game.keys.F_KEY?this.breakDownDown=!1:delete this.keys[e.keyCode]}.bind(this)},b.prototype.gravity=function(){this.ly=this.y,this.vy+=this.gravityVelocity,this.y+=this.vy,this.platformColisionFloor()&&(this.jumping=!1,this.doubleJumping=!1),this.platformColision()&&(this.y=this.ly,this.vy=0)},b.prototype.platformColisionElem=function(e){var t=void 0;return this.game.platforms.forEach(function(e){this.x+this.w>=e.x&&e.x+e.w>=this.x&&this.y+this.h>=e.y&&e.y+e.h>=this.y&&(t=e)}.bind(this)),t},b.prototype.platformColision=function(e){var t=!1,a=void 0,s=0;return this.game.platforms.forEach(function(e,i){this.x+this.w>e.x&&e.x+e.w>=this.x&&this.y+this.h>e.y&&e.y+e.h>this.y&&(t=!0,a=e,s=i)}.bind(this)),this.dashing&&a&&a.isDashBreakable&&this.game.platforms.splice(s,1),this.vy>=this.breakDownVelocity&&a&&a.isDownBreakable&&this.game.platforms.splice(s,1),t},b.prototype.platformColisionFloor=function(){var e=!1;return this.game.platforms.forEach(function(t){this.x+this.w>t.x&&t.x+t.w>=this.x&&this.y+this.h>t.y&&t.y+t.h>this.y+this.h&&(e=!0)}.bind(this)),e},b.prototype.itemColision=function(e){var t=-1;return this.game.collectableItems.forEach(function(e,a){this.x+this.w>e.x&&e.x+e.w>=this.x&&this.y+this.h>e.y&&e.y+e.h>this.y&&(t=a)}.bind(this)),t},b.prototype.damageColision=function(e){var t=-1;return this.game.damageItems.forEach(function(e,a){this.x+this.w>e.x&&e.x+e.w>=this.x&&this.y+this.h>e.y&&e.y+e.h>this.y&&(t=a)}.bind(this)),t},b.prototype.powerColision=function(e){var t=-1;return this.game.powerItems.forEach(function(e,a){this.x+this.w>e.x&&e.x+e.w>=this.x&&this.y+this.h>e.y&&e.y+e.h>this.y&&(t=a)}.bind(this)),t},b.prototype.animateImg=function(){this.game.framesCounter%2===0&&(this.img.frameIndex+=1,this.img.frameIndex>25&&(this.img.frameIndex=0))},b.prototype.animateRun=function(){this.img.frameIndex<this.img.framesFrom&&(this.img.frameIndex=this.img.framesFrom),this.game.framesCounter%9===0&&(this.img.frameIndex+=1,this.img.frameIndex>this.img.framesTo&&(this.img.frameIndex=this.img.framesFrom))},b.prototype.animateDash=function(){this.img.frameIndex<this.img.framesFrom&&(this.img.frameIndex=this.img.framesFrom),this.game.framesCounter%10===0&&(this.img.frameIndex+=1,this.img.frameIndex>this.img.framesTo&&(this.img.frameIndex=this.img.framesFrom))},b.prototype.setAnimationParams=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.img.framesFrom=e,this.img.framesTo=t,this.img.framesX=a,this.img.framesY=s,this.img.framesW=i,this.img.framesH=n};var y=function e(){Object(l.a)(this,e),this.platforms=[],this.collectableItems=[],this.damageItems=[],this.powerItems=[],this.frontImages=[],this.backImages=[],this.background=new p,this.playerX=0,this.playerY=0},w=function(){function e(t,a,s,i,n,r){var h=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Object(l.a)(this,e),this.game=t,this.x=s,this.y=i,this.w=n,this.h=r,this.isDashBreakable=h,this.isDownBreakable=o,this.img=new Image,this.img.src=a,this.img.frames=1,this.img.framesTo=1,this.img.framesFrom=1,this.img.frameIndex=0,this.img.framesX=0,this.img.framesY=0,this.img.framesW=0,this.img.framesH=0}return Object(h.a)(e,[{key:"draw",value:function(){this.game.ctx.drawImage(this.img,this.img.frameIndex*Math.floor(this.img.width/this.img.frames)+this.img.framesX,this.img.framesY,Math.floor(this.img.width/this.img.frames)+this.img.framesW,this.img.height+this.img.framesH,this.x,this.y,this.w,this.h)}}]),e}(),I=function(){function e(t,a,s,i,n,r,h){var o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"";Object(l.a)(this,e),this.ctx=t,this.x=s,this.y=i,this.w=n,this.h=r,this.isActive=h,this.type=c,this.img=new Image,this.img.src=a,this.damage=o,this.img.frames=1,this.img.framesTo=0,this.img.framesFrom=0,this.img.frameIndex=0,this.img.framesX=0,this.img.framesY=0,this.img.framesW=0,this.img.framesH=0}return Object(h.a)(e,[{key:"draw",value:function(){this.isActive&&this.ctx.drawImage(this.img,this.img.frameIndex*Math.floor(this.img.width/this.img.frames)+this.img.framesX,this.img.framesY,Math.floor(this.img.width/this.img.frames)+this.img.framesW,this.img.height+this.img.framesH,this.x,this.y,this.w,this.h)}},{key:"animateItem",value:function(e){this.img.frameIndex<this.img.framesFrom&&(this.img.frameIndex=this.img.framesFrom),e%10===0&&(this.img.frameIndex+=1,this.img.frameIndex>this.img.framesTo&&(this.img.frameIndex=this.img.framesFrom))}},{key:"setAnimationParams",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.img.framesFrom=e,this.img.framesTo=t,this.img.framesX=a,this.img.framesY=s,this.img.framesW=i,this.img.framesH=n}}]),e}(),E=function(){function e(t,a,s,i,n,r){Object(l.a)(this,e),this.ctx=t,this.img=new Image,this.img.src=r,this.x=a,this.y=s,this.w=i,this.h=n}return Object(h.a)(e,[{key:"draw",value:function(){this.ctx.drawImage(this.img,this.x,this.y,this.w,this.h)}}]),e}(),k=function(){function e(){Object(l.a)(this,e),this.totalGame=void 0,this.canvas=void 0,this.ctx=void 0,this.fps=100,this.keys={TOP_KEY:38,SPACE:32,LEFT_KEY:37,RIGHT_KEY:39,D_KEY:68,F_KEY:70},this.platforms=[],this.collectableItems=[],this.damageItems=[],this.powerItems=[],this.currentLevel=0,this.levels=[],this.frontImages=[],this.backImages=[],this.framesCounter=0}return Object(h.a)(e,[{key:"init",value:function(e,t){this.totalGame=t,this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.fps=60,this.reset(),this.background=new p(this.ctx,this.canvas.width,this.canvas.height),this.player=new b(this),this.loadData(),this.loadLevel(),this.interval=setInterval(function(){this.clear(),this.framesCounter++,this.framesCounter>1e3&&(this.framesCounter=0),this.player.gravity(),this.player.move(),this.detectItemCollision(),this.detectDamageCollision(),this.detectPowerCollision(),this.drawAll(this.framesCounter)}.bind(this),1e3/this.fps)}},{key:"reset",value:function(){this.background=new p(this.ctx,this.canvas.width,this.canvas.height),this.player=new b(this),this.framesCounter=0}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"drawPlatforms",value:function(){this.platforms.forEach(function(e){e.draw()})}},{key:"drawCollectItems",value:function(e){this.collectableItems.forEach(function(t){t.isActive&&(t.draw(),t.animateItem(e))})}},{key:"drawDamageItems",value:function(e){this.damageItems.forEach(function(t){t.isActive&&(t.draw(),t.animateItem(e))})}},{key:"drawPowerItems",value:function(e){this.powerItems.forEach(function(t){t.isActive&&(t.draw(),t.animateItem(e))})}},{key:"drawBackImages",value:function(){this.backImages.forEach(function(e){e.draw()})}},{key:"drawFrontImages",value:function(){this.frontImages.forEach(function(e){e.draw()})}},{key:"drawAll",value:function(e){this.background.draw(),this.drawBackImages(),this.drawPlatforms(),this.drawCollectItems(e),this.drawDamageItems(e),this.drawPowerItems(e),this.player.draw(),this.drawFrontImages()}},{key:"detectItemCollision",value:function(){var e=this.player.itemColision();e>=0&&this.collectableItems[e].isActive&&(this.collectableItems[e].isActive=!1,this.player.collectableItems.push(this.collectableItems[e]),this.collectableItems.length>e+1?this.collectableItems[e+1].isActive=!0:this.changeLevel())}},{key:"detectDamageCollision",value:function(){var e=this.player.damageColision();e>=0&&this.damageItems[e].isActive&&(this.loadLevelData(),this.loadLevel())}},{key:"detectPowerCollision",value:function(){var e=this.player.powerColision();e>=0&&this.powerItems[e].isActive&&(this.powerItems[e].isActive=!1,"dash"==this.powerItems[e].type?this.player.abailableDash=!0:"down"==this.powerItems[e].type?this.player.abailableBreakDown=!0:"jump"==this.powerItems[e].type&&(this.player.abailableDoubleJump=!0))}},{key:"changeLevel",value:function(){this.currentLevel++,this.currentLevel<this.levels.length&&this.loadLevel()}},{key:"loadLevel",value:function(){this.platforms=this.levels[this.currentLevel].platforms,this.collectableItems=this.levels[this.currentLevel].collectableItems,this.damageItems=this.levels[this.currentLevel].damageItems,this.powerItems=this.levels[this.currentLevel].powerItems,this.backImages=this.levels[this.currentLevel].backImages,this.frontImages=this.levels[this.currentLevel].frontImages,this.background.img.src=this.levels[this.currentLevel].background.img.src,this.player.x=this.levels[this.currentLevel].playerX,this.player.y=this.levels[this.currentLevel].playerY,this.player.abailableDash=!1,this.player.abailableBreakDown=!1,this.player.abailableDoubleJump=!1}},{key:"calculateSize",value:function(e){return this.canvas.width/24*e}},{key:"loadData",value:function(){this.totalGame.forEach(function(e){var t=new y(this);console.log(e.platforms),e.platforms.forEach(function(e){t.platforms.push(new w(this,e.piece.src,this.calculateSize(e.x),this.calculateSize(e.y),this.calculateSize(e.w),this.calculateSize(e.h),e.isDashBreakable,e.isDownBreakable))}.bind(this)),e.collectableItems.forEach(function(e){t.collectableItems.push(new I(this.ctx,e.piece.src,this.calculateSize(e.x),this.calculateSize(e.y),this.calculateSize(e.w),this.calculateSize(e.h),e.isActive))}.bind(this)),e.damageItems&&e.damageItems.forEach(function(e){t.damageItems.push(new I(this.ctx,e.piece.src,this.calculateSize(e.x),this.calculateSize(e.y),this.calculateSize(e.w),this.calculateSize(e.h),e.isActive,e.damage))}.bind(this)),e.powerItems&&e.powerItems.forEach(function(e){t.powerItems.push(new I(this.ctx,e.piece.src,this.calculateSize(e.x),this.calculateSize(e.y),this.calculateSize(e.w),this.calculateSize(e.h),e.isActive,e.damage,e.type))}.bind(this)),e.backImages&&e.backImages.forEach(function(e){t.backImages.push(new E(this.ctx,this.calculateSize(e.x),this.calculateSize(e.y),this.calculateSize(e.w),this.calculateSize(e.h),e.piece.src))}.bind(this)),e.frontImages&&e.frontImages.forEach(function(e){t.frontImages.push(new E(this.ctx,this.calculateSize(e.x),this.calculateSize(e.y),this.calculateSize(e.w),this.calculateSize(e.h),e.piece.src))}.bind(this)),e.background&&(t.background=new p(this.ctx,this.canvas.width,this.canvas.height,e.background.src)),e.player&&(t.playerX=e.player.x,t.playerY=e.player.y),this.levels.push(t)}.bind(this))}},{key:"loadLevelData",value:function(){var e=new y(this);this.totalGame[this.currentLevel].platforms.forEach(function(t){e.platforms.push(new w(this,t.img,t.x,t.y,t.w,t.h,t.isDashBreakable,t.isDownBreakable))}.bind(this)),this.totalGame[this.currentLevel].collectableItems.forEach(function(t){e.collectableItems.push(new I(this.ctx,t.src,t.x,t.y,t.w,t.h,t.isActive))}.bind(this)),this.totalGame[this.currentLevel].damageItems&&this.totalGame[this.currentLevel].damageItems.forEach(function(t){e.damageItems.push(new I(this.ctx,t.src,t.x,t.y,t.w,t.h,t.isActive,t.damage))}.bind(this)),this.totalGame[this.currentLevel].powerItems&&this.totalGame[this.currentLevel].powerItems.forEach(function(t){e.powerItems.push(new I(this.ctx,t.src,t.x,t.y,t.w,t.h,t.isActive,t.damage,t.type))}.bind(this)),this.totalGame[this.currentLevel].backImages&&this.totalGame[this.currentLevel].backImages.forEach(function(t){e.backImages.push(new E(this.ctx,t.x,t.y,t.w,t.h,t.src))}.bind(this)),this.totalGame[this.currentLevel].frontImages&&this.totalGame[this.currentLevel].frontImages.forEach(function(t){e.frontImages.push(new E(this.ctx,t.x,t.y,t.w,t.h,t.src))}.bind(this)),e.background=new p(this.ctx,this.canvas.width,this.canvas.height,this.totalGame[this.currentLevel].background.src),e.playerX=this.totalGame[this.currentLevel].player.x,e.playerY=this.totalGame[this.currentLevel].player.y,this.levels[this.currentLevel]=e}}]),e}(),x=a(14),C=a.n(x),j=C.a.create({baseURL:"".concat("https://phosphorus-game.herokuapp.com","/level")}),O=function(e){if(e.response&&e.response.data)throw e.response.data.message;throw e},L={service:j,getPieces:function(e){return j.get("/pieces",{params:{type:e}}).then(function(e){return e.data}).catch(O)},saveNewLevel:function(e){return j.post("/save",e).then(function(e){return e.data}).catch(O)},getLevel:function(e){return j.get("/".concat(e)).then(function(e){return e.data}).catch(O)},getLevelList:function(){return j.get("/list").then(function(e){return e.data}).catch(O)}},S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this))).state={levelId:void 0,totalGame:[],game:new k},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState(Object(v.a)({},this.state,{levelId:this.props.match.params.id}),function(){L.getLevel(e.state.levelId).then(function(t){var a=Object(f.a)(e.state.totalGame);a.push(t.data.totalGame),e.setState(Object(v.a)({},e.state,{totalGame:a}),function(){return e.drawCanvas()})})})}},{key:"componentDidUpdate",value:function(){}},{key:"drawCanvas",value:function(){var e=document.getElementById("canvas");e.width=900,e.height=450,this.state.game.init(e,this.state.totalGame)}},{key:"render",value:function(){return i.a.createElement("div",{className:"Game",id:"Game"},i.a.createElement("canvas",{id:"canvas"}))}}]),t}(s.Component),D=function e(){var t=this;Object(l.a)(this,e),this.signup=function(e,a){return console.log(e),t.service.post("/signup",{username:e,password:a}).then(function(e){return e.data})},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/currentUser").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.service=C.a.create({baseURL:"".concat("https://phosphorus-game.herokuapp.com","/auth"),withCredentials:!0})},N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).handleLogout=function(e){a.props.logout()},a.state={loggedInUser:null},a.service=new D,a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(v.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){return this.state.loggedInUser?i.a.createElement("nav",{className:"nav-style"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("a",{className:"logout",onClick:this.handleLogout},"Logout"))),i.a.createElement("h4",null,this.state.loggedInUser.username," let's do Games!")):i.a.createElement("div",null,i.a.createElement("nav",{className:"nav-style"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(d.a,{to:"/signup",className:"link",style:{textDecoration:"none"}},"Signup")),i.a.createElement("li",null,i.a.createElement(d.a,{to:"/login",className:"link",style:{textDecoration:"none"}},"Login")))))}}]),t}(s.Component),P=a(10),A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,s=a.state.password;a.service.signup(t,s).then(function(e){a.setState({username:"",password:""}),a.props.getUser(e.user)}).catch(function(e){a.setState({username:t,password:s,error:!0})})},a.handleChange=function(e){var t=e.target,s=t.name,i=t.value;a.setState(Object(P.a)({},s,i))},a.state={username:"",password:""},a.service=new D,a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("d",null,i.a.createElement("h3",null,"Do you want to create new game levels?"),i.a.createElement("h4",null,"New User"),i.a.createElement("form",{onSubmit:this.handleFormSubmit},i.a.createElement("div",null,i.a.createElement("label",null,"Username:"),i.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),i.a.createElement("div",null,i.a.createElement("label",null,"Password:"),i.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),i.a.createElement("input",{type:"submit",value:"Sign up"})),i.a.createElement("h1",null,this.state.error?"Error":""))}}]),t}(s.Component),F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,s=a.state.password;a.service.login(t,s).then(function(e){a.setState({username:t,password:s,error:!1}),a.props.getUser(e)}).catch(function(e){a.setState({username:t,password:s,error:!0})})},a.handleChange=function(e){var t=e.target,s=t.name,i=t.value;a.setState(Object(P.a)({},s,i))},a.state={username:"",password:""},a.service=new D,a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("h3",null,"Login to Play"),i.a.createElement("form",{onSubmit:this.handleFormSubmit},i.a.createElement("div",null,i.a.createElement("label",null,"Username:"),i.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),i.a.createElement("div",null,i.a.createElement("label",null,"Password:"),i.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),i.a.createElement("input",{type:"submit",value:"Login"})),i.a.createElement("h1",null,this.state.error?"Error":""))}}]),t}(s.Component),U=C.a.create({baseURL:"".concat("https://phosphorus-game.herokuapp.com")}),T=function(e){if(e.response&&e.response.data)throw e.response.data.message;throw e},G={service:U,handleUpload:function(e){var t=new FormData;return t.append("imageUrl",e),U.post("/admin/upload",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data}).catch(T)},saveNewThing:function(e){return U.post("/admin/newPiece",e).then(function(e){return e.data}).catch(T)}},Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).handleChange=function(e){var t=e.target,s=t.name,i=t.value;a.setState(Object(P.a)({},s,i))},a.handleChecked=function(e){a.setState(Object(P.a)({},e.target.name,e.target.checked))},a.handleFileUpload=function(e){e.preventDefault(),console.log("The file to be uploaded is: ",e.target.files[0]),G.handleUpload(e.target.files[0]).then(function(e){a.setState(Object(v.a)({},a.state,{src:e.url}))})},a.handleSubmit=function(e){e.preventDefault(),G.saveNewThing(a.state).then(function(e){console.log("added: ",e)}).catch(function(e){console.log("Error while adding the thing: ",e)})},a.state={name:"",type:"",src:"",animated:!1,frames:0,framesTo:0,framesFrom:0,frameIndex:0,framesX:0,framesY:0,framesW:0,framesH:0,w:1,h:1},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"Piece"},i.a.createElement("h2",null,"New Piece"),i.a.createElement("form",{className:"pieceForm",onSubmit:function(t){return e.handleSubmit(t)}},i.a.createElement("div",{className:"form-row"},i.a.createElement("label",null,"Name"),i.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})),i.a.createElement("div",{className:"form-row"},i.a.createElement("label",null,"Type"),i.a.createElement("select",{name:"type",onChange:function(t){return e.handleChange(t)}},i.a.createElement("option",{value:"BACK"},"Background"),i.a.createElement("option",{value:"PLATFORM"},"Platform"),i.a.createElement("option",{value:"FRONT"},"Front Image"),i.a.createElement("option",{value:"IMG"},"Back Image"),i.a.createElement("option",{value:"PLAYER"},"Player"),i.a.createElement("option",{value:"COLITEM"},"Colectable Item"),i.a.createElement("option",{value:"DAMITEM"},"Damage Item"),i.a.createElement("option",{value:"POWITEM"},"Power Item"))),i.a.createElement("div",{className:"form-row"},i.a.createElement("input",{type:"file",onChange:function(t){return e.handleFileUpload(t)}})),i.a.createElement("div",{className:"form-row"},i.a.createElement("label",null,"Is animated"),i.a.createElement("input",{type:"checkbox",name:"animated",onChange:function(t){return e.handleChecked(t)}})),i.a.createElement("div",{style:{display:this.state.animated?"":"none"}}),i.a.createElement("div",{className:"form-row"},i.a.createElement("button",{type:"submit"},"Save new Piece"))))}}]),t}(s.Component),z=(a(57),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).handleChange=function(e){var t=e.target,s=t.name,i=t.value;a.setState(Object(P.a)({},s,i))},a.handleLevelChange=function(e){var t=e.target,s=t.name,i=t.value;a.setState(Object(v.a)({},a.state,{level:Object(v.a)({},a.state.level,Object(P.a)({},s,i))}))},a.handleSelectChange=function(e){var t=e.target,s=t.name,i=t.value;a.setState(Object(P.a)({},s,i),function(){L.getPieces(a.state.type).then(function(e){a.setState(Object(v.a)({},a.state,{pieces:e.data.pieces}))})})},a.handlePieceSelection=function(e,t){"BACK"===t.type?a.setState(Object(v.a)({},a.state,{selectedPiece:{},backImage:t.src,level:Object(v.a)({},a.state.level,{background:{src:t.src}})})):a.setState(Object(v.a)({},a.state,{selectedPiece:t}))},a.handleSubmit=function(e){e.preventDefault(),console.log(a.state.level),L.saveNewLevel(a.state.level).then(function(e){console.log("added: ",e)}).catch(function(e){console.log("Error while adding the thing: ",e)})},a.state={level:{name:"",creator:a.props.loggedInUser._id,platforms:[],collectableItems:[],damageItems:[],powerItems:[],frontImages:[],backImages:[],background:{},playerX:0,playerY:0},type:"",pieces:[],selectedPiece:{},backImage:""},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"mouseEnter",value:function(e){e.target.style.backgroundImage+="url(".concat(this.state.selectedPiece.src,")"),e.target.style.backgroundSize="cover",e.target.style.backgroundRepeat="no-repeat",e.target.style.backgroundPosition="center center"}},{key:"mouseLeave",value:function(e){e.target.selected||(e.target.style.backgroundImage="")}},{key:"mouseClick",value:function(e){if(this.state.selectedPiece.type)switch(e.target.selected=!0,e.target.style.backgroundImage="url(".concat(this.state.selectedPiece.src,")"),e.target.style.opacity="1",console.log(this.state),this.state.selectedPiece.type){case"PLATFORM":var t={piece:this.state.selectedPiece._id,x:Number(e.target.getAttribute("column")),y:Number(e.target.getAttribute("row")),w:1,h:1},a=Object(f.a)(this.state.level.platforms);a.push(t),this.setState(Object(v.a)({},this.state,{level:Object(v.a)({},this.state.level,{platforms:a})}));break;case"FRONT":var s={piece:this.state.selectedPiece._id,x:Number(e.target.getAttribute("column")),y:Number(e.target.getAttribute("row")),w:1,h:1},i=Object(f.a)(this.state.level.frontImages);i.push(s),this.setState(Object(v.a)({},this.state,{level:Object(v.a)({},this.state.level,{frontImages:i})}));break;case"IMG":var n={piece:this.state.selectedPiece._id,x:Number(e.target.getAttribute("column")),y:Number(e.target.getAttribute("row")),w:1,h:1},r=Object(f.a)(this.state.level.backImages);r.push(n),this.setState(Object(v.a)({},this.state,{level:Object(v.a)({},this.state.level,{backImages:r})}));break;case"PLAYER":var l={piece:this.state.selectedPiece._id,x:Number(e.target.getAttribute("column")),y:Number(e.target.getAttribute("row")),w:1,h:1};this.setState(Object(v.a)({},this.state,{level:Object(v.a)({},this.state.level,{player:l})}));break;case"COLITEM":var h={piece:this.state.selectedPiece._id,x:Number(e.target.getAttribute("column")),y:Number(e.target.getAttribute("row")),w:1,h:1,isActive:!0},o=Object(f.a)(this.state.level.collectableItems);o.push(h),this.setState(Object(v.a)({},this.state,{level:Object(v.a)({},this.state.level,{collectableItems:o})}))}}},{key:"render",value:function(){for(var e=this,t=[],a=[],s={border:"1px solid grey",opacity:"0.5"},n=0;n<12;n++){a=[];for(var r=0;r<24;r++)a.push(i.a.createElement("div",{key:n+"-"+r,className:"cell",row:n,column:r,selected:!1,style:s,onMouseEnter:function(t){return e.mouseEnter(t)},onMouseLeave:function(t){return e.mouseLeave(t)},onClick:function(t){return e.mouseClick(t)}}));t.push(a)}var l={display:"grid",gridTemplateColumns:"repeat(".concat(24,",1fr)"),gridTemplateRows:"repeat(2fr)",width:"720px",height:"360px",backgroundImage:"url(".concat(this.state.backImage,")"),backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"},h=this.state.pieces.map(function(t,a){return i.a.createElement("li",{key:a},i.a.createElement("div",{className:"itemDiv"},i.a.createElement("img",{className:"itemImg",src:t.src,onClick:function(a){return e.handlePieceSelection(a,t)},alt:t.name}),i.a.createElement("span",null,t.name)))});return i.a.createElement("div",{className:"LevelCreator",id:"LevelCreator"},i.a.createElement("form",{className:"levelForm",onSubmit:function(t){return e.handleSubmit(t)}},i.a.createElement("div",{className:"form-row"},i.a.createElement("label",null,"Level Name"),i.a.createElement("input",{type:"text",name:"name",value:this.state.level.name,onChange:function(t){return e.handleLevelChange(t)}})),i.a.createElement("div",{className:"form-row"},i.a.createElement("select",{name:"type",onChange:function(t){return e.handleSelectChange(t)}},i.a.createElement("option",{value:"PLAYER"},"Player"),i.a.createElement("option",{value:"BACK"},"Background"),i.a.createElement("option",{value:"PLATFORM"},"Platform"),i.a.createElement("option",{value:"FRONT"},"Front Image"),i.a.createElement("option",{value:"IMG"},"Back Image"),i.a.createElement("option",{value:"COLITEM"},"Colectable Item"),i.a.createElement("option",{value:"DAMITEM"},"Damage Item"),i.a.createElement("option",{value:"POWITEM"},"Power Item"))),i.a.createElement("div",{className:"form-row"},i.a.createElement("button",{type:"submit"},"Save new Level"))),i.a.createElement("div",{className:"create-board"},i.a.createElement("div",{className:"container",style:l},t),i.a.createElement("div",{className:"pieces-container"},i.a.createElement("nav",null,i.a.createElement("ul",null,h)))))}}]),t}(s.Component)),M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={levelList:[]},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;L.getLevelList().then(function(t){e.setState(Object(v.a)({},e.state,{levelList:t.data.levels}),function(){console.log(e.state)})})}},{key:"render",value:function(){var e=this.state.levelList.map(function(e,t){return console.log(e),i.a.createElement(d.a,{style:{textDecoration:"none"},to:"/game/".concat(e._id),key:e._id},i.a.createElement("li",{key:t,className:"link"},i.a.createElement("div",null,i.a.createElement("span",{className:"levelName"},e.name)," ",i.a.createElement("span",null,"-by ",e.creator.username,"-"))))});return i.a.createElement("div",{className:"LevelList"},i.a.createElement("ul",null,e))}}]),t}(s.Component),R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).getUser=function(e){a.setState({loggedInUser:e})},a.logout=function(){a.service.logout().then(function(){a.setState({loggedInUser:null})})},a.state={loggedInUser:null},a.service=new D,a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"render",value:function(){var e=this;return this.fetchUser(),this.state.loggedInUser?i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement(N,{userInSession:this.state.loggedInUser,logout:this.logout}),i.a.createElement("div",{className:"menu"},i.a.createElement(d.a,{to:"/generate",className:"link",style:{textDecoration:"none"}}," Create New Level "),i.a.createElement(d.a,{to:"/piece",className:"link",style:{textDecoration:"none"}}," Add new Piece "),i.a.createElement(d.a,{to:"/levelList",className:"link",style:{textDecoration:"none"}}," Level List "))),i.a.createElement("div",null,i.a.createElement(u.a,null,i.a.createElement(g.a,{path:"/generate",component:function(){return i.a.createElement(z,{loggedInUser:e.state.loggedInUser})}}),i.a.createElement(g.a,{path:"/piece",component:function(){return i.a.createElement(Y,{loggedInUser:e.state.loggedInUser})}}),i.a.createElement(g.a,{path:"/levelList",component:function(){return i.a.createElement(M,{loggedInUser:e.state.loggedInUser})}}),i.a.createElement(g.a,{exact:!0,path:"/game/:id",component:S})))):i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement(N,{userInSession:this.state.loggedInUser,logout:this.logout}),i.a.createElement(u.a,null,i.a.createElement(g.a,{path:"/levelList",component:function(){return i.a.createElement(M,{loggedInUser:e.state.loggedInUser})}}),i.a.createElement(g.a,{exact:!0,path:"/signup",render:function(){return i.a.createElement(A,{getUser:e.getUser})}}),i.a.createElement(g.a,{exact:!0,path:"/login",render:function(){return i.a.createElement(F,{getUser:e.getUser})}}))))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=a(61);r.a.render(i.a.createElement(B.a,null,i.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,1,2]]]);
//# sourceMappingURL=main.73158741.chunk.js.map